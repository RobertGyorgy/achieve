---
// Featured Work Section Component
const featuredProjects = [
  {
    id: 1,
    title: 'Digital Agency',
    slug: 'digital-agency',
    description: 'Modern agency website with immersive design',
    tags: ['Web Design', 'Development', 'Animation'],
    videoUrl: '/Videos/video1.mp4',
  },
  {
    id: 2,
    title: 'E-Commerce Platform',
    slug: 'ecommerce-platform',
    description: 'Full-stack e-commerce solution with advanced features',
    tags: ['E-Commerce', 'Development'],
    videoUrl: '/video 2.mp4',
  },
  {
    id: 3,
    title: 'SaaS Dashboard',
    slug: 'saas-dashboard',
    description: 'Enterprise-grade dashboard with real-time analytics',
    tags: ['SaaS', 'UI/UX Design'],
    videoUrl: '/Videos/orange 1.mp4',
  },
];
---

<div class="relative w-full z-20">
  <section id="featured-work-container" class="relative w-full h-[100svh] bg-[#0d141a] overflow-hidden">
    
    <!-- Static Slice Borders overlay -->
    <div class="absolute inset-0 w-full h-full pointer-events-none z-[40] grid grid-cols-2 md:grid-cols-3">
      <div class="w-full h-full border-r border-white/20"></div>
      <div class="w-full h-full border-r border-white/20 md:border-r-0 lg:border-r lg:border-white/20"></div>
      <div class="w-full h-full hidden md:block"></div>
    </div>

    <!-- Global Transition Mask (Wipes over videos) -->
    <div class="absolute inset-0 w-full h-full pointer-events-none z-[35] grid grid-cols-2 md:grid-cols-3 js-transition-mask">
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform"></div>
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform"></div>
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform hidden md:block"></div>
    </div>

    <div class="absolute inset-0 w-full h-full overflow-hidden js-projects-container">
      {featuredProjects.map((project, index) => (
        <article 
          class={`featured-card absolute inset-0 w-full h-full flex flex-col justify-end will-change-transform z-10 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
          style={`pointer-events: ${index === 0 ? 'auto' : 'none'};`}
          data-index={index}
        >
          <!-- Base Full-Screen Video -->
          <div class="absolute inset-0 w-full h-full pointer-events-none overflow-hidden z-10">
            <div class="absolute inset-0 opacity-20 z-10" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 40px 40px;"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-20"></div>
            <video 
              src={project.videoUrl}
              class="absolute inset-0 w-full h-full object-cover object-center"
              muted
              loop
              playsinline
              preload="none"
            ></video>
          </div>

          <!-- Content (Stays above everything via z-50, but we'll fade it with GSAP) -->
          <div class={`card-content relative z-50 w-full max-w-[90rem] mx-auto flex flex-col items-center lg:items-start text-center lg:text-left gap-6 lg:gap-8 px-6 lg:px-12 xl:px-12 ${index === 0 ? 'opacity-100' : 'opacity-0'}`} style="margin-bottom: 15vh !important;">
            
            <div class="flex items-center gap-4 text-white/40 font-mono text-sm mb-2">
              <span class="text-white">0{index + 1}</span>
              <span class="w-8 h-[1px] bg-white/20"></span>
              <span>0{featuredProjects.length}</span>
            </div>
            
            <a href={`/work/${project.slug}`} class="group block lg:w-max mx-auto lg:mx-0">
              <div class="flex items-center relative">
                <!-- Hover Arrow (Left Side, No Circle) -->
                <div class="absolute left-0 opacity-0 -translate-x-4 transition-all duration-500 ease-out group-hover:opacity-100 group-hover:translate-x-0 flex items-center">
                  <svg class="w-8 h-8 md:w-10 md:h-10 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                  </svg>
                </div>
                
                <!-- Project Title (Slides Right on Hover) -->
                <h3 class="text-white text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-[5.5rem] font-nura uppercase leading-[0.9] tracking-tight transition-transform duration-500 ease-out will-change-transform group-hover:translate-x-12 md:group-hover:translate-x-16">
                  {project.title}
                </h3>
              </div>
            </a>

            <!-- Glassmorphism "View Work" Button (Mobile only) -->
            <div 
              class="mobile-view-work-btn featured-card-element lg:hidden opacity-0 translate-y-4 rounded-full border border-white/20 backdrop-blur-xl bg-white/5 relative mx-auto text-center"
              style="padding: 14px 32px; overflow: hidden; clip-path: inset(0 round 9999px); -webkit-clip-path: inset(0 round 9999px);"
              data-index={index}
            >
              <!-- Bottom Layer (Static White Text) -->
              <span class="relative z-10 text-white text-sm font-bold uppercase tracking-[0.1em]">View Work</span>
              
              <!-- Progress Fill Layer (Expanding Black Text) -->
              <div class="mobile-btn-progress-fill absolute inset-0 bg-white origin-left scale-x-0 overflow-hidden pointer-events-none">
                <span class="absolute inset-0 flex items-center justify-center text-black text-sm font-bold uppercase tracking-[0.1em] whitespace-nowrap">View Work</span>
              </div>
            </div>
          </div>

          <!-- Video Slices Container -->
          <div class="absolute inset-0 z-0 pointer-events-none">
            <div class="js-transition-mask absolute inset-0 grid grid-cols-1 md:grid-cols-3">
              <div class="mask-slice bg-black/95 origin-left scale-x-0"></div>
              <div class="mask-slice bg-black/95 origin-left scale-x-0"></div>
              <div class="mask-slice bg-black/95 origin-left scale-x-0"></div>
            </div>
          </div>

          <!-- Full Card Clickable Overlay -->
          <a href={`/work/${project.slug}`} class="absolute inset-0 z-40 w-full h-full block" aria-label={`View ${project.title}`}></a>

        </article>
      ))}
    </div>
  </section>

  <!-- Cursor Tooltip Wrapper (Appended to body via script) -->
  <div id="view-project-tooltip" class="drag-tooltip">
    <!-- Bottom Layer (Static White Text) -->
    <span class="relative z-10">View Work</span>
    
    <!-- Progress Fill Layer (Expanding Black Text) -->
    <div class="tooltip-bg absolute inset-0 bg-white origin-left scale-x-0 overflow-hidden">
      <span class="absolute inset-0 flex items-center justify-center text-black">View Work</span>
    </div>
  </div>
</div>

<style>
  .drag-tooltip {
    position: fixed;
    z-index: 9999;
    pointer-events: none;
    opacity: 0;
    scale: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 160px;
    height: 160px;
    border-radius: 9999px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    overflow: hidden;
    clip-path: inset(0 round 9999px);
    -webkit-clip-path: inset(0 round 9999px);
    
    /* Typography matching Hero and UI */
    font-size: 14px;
    font-weight: 700;
    font-family: inherit;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    color: white;
    transition: opacity 0.3s ease, scale 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .drag-tooltip.visible {
    opacity: 1;
    scale: 1;
  }
</style>


