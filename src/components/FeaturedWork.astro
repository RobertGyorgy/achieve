---
// Featured Work Section Component
const featuredProjects = [
  {
    id: 1,
    title: 'Digital Agency',
    slug: 'digital-agency',
    description: 'Modern agency website with immersive design',
    tags: ['Web Design', 'Development', 'Animation'],
    videoUrl: '/Videos/video1.mp4',
  },
  {
    id: 2,
    title: 'E-Commerce Platform',
    slug: 'ecommerce-platform',
    description: 'Full-stack e-commerce solution with advanced features',
    tags: ['E-Commerce', 'Development'],
    videoUrl: '/video 2.mp4',
  },
  {
    id: 3,
    title: 'SaaS Dashboard',
    slug: 'saas-dashboard',
    description: 'Enterprise-grade dashboard with real-time analytics',
    tags: ['SaaS', 'UI/UX Design'],
    videoUrl: '/Videos/orange 1.mp4',
  },
];
---

<div class="relative w-full z-20">
  <section id="featured-work-container" class="relative w-full h-[100svh] bg-[#0d141a] overflow-hidden">
    
    <!-- Static Slice Borders overlay -->
    <div class="absolute inset-0 w-full h-full pointer-events-none z-[40] grid grid-cols-2 md:grid-cols-3">
      <div class="w-full h-full border-r border-white/20"></div>
      <div class="w-full h-full border-r border-white/20 md:border-r-0 lg:border-r lg:border-white/20"></div>
      <div class="w-full h-full hidden md:block"></div>
    </div>

    <!-- Global Transition Mask (Wipes over videos) -->
    <div class="absolute inset-0 w-full h-full pointer-events-none z-[35] grid grid-cols-2 md:grid-cols-3 js-transition-mask">
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform"></div>
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform"></div>
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform hidden md:block"></div>
    </div>

    <div class="absolute inset-0 w-full h-full overflow-hidden js-projects-container">
      {featuredProjects.map((project, index) => (
        <article 
          class={`featured-card absolute inset-0 w-full h-full flex flex-col justify-end will-change-transform z-10 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
          style={`pointer-events: ${index === 0 ? 'auto' : 'none'};`}
          data-index={index}
        >
          <!-- Base Full-Screen Video -->
          <div class="absolute inset-0 w-full h-full pointer-events-none overflow-hidden z-10">
            <div class="absolute inset-0 opacity-20 z-10" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 40px 40px;"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-20"></div>
            <video 
              src={project.videoUrl}
              class="absolute inset-0 w-full h-full object-cover object-center"
              autoplay
              muted
              loop
              playsinline
            ></video>
          </div>

          <!-- Content (Stays above everything via z-50, but we'll fade it with GSAP) -->
          <div class={`card-content relative z-50 w-full max-w-[90rem] mx-auto flex flex-col gap-6 lg:gap-8 xl:px-12 ${index === 0 ? 'opacity-100' : 'opacity-0'}`} style="margin-bottom: 15vh !important; padding-left: 4vw !important;">
            
            <a href={`/work/${project.slug}`} class="group block w-full max-w-max">
              <div class="flex items-center relative">
                <h3 class="text-white text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-[5.5rem] font-nura uppercase leading-[0.9] tracking-tight transition-transform duration-500 ease-out will-change-transform group-hover:translate-x-24 sm:group-hover:translate-x-32 md:group-hover:translate-x-40 lg:group-hover:translate-x-48 lg:group-hover:pl-4">
                  {project.title}
                </h3>
                
                <!-- View Project Hover Popup -->
                <div class="absolute left-0 top-1/2 -translate-y-1/2 overflow-hidden h-12 md:h-16 w-[200px] pointer-events-none">
                  <div class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-full opacity-0 transition-all duration-500 ease-out group-hover:translate-x-0 group-hover:opacity-100 flex items-center justify-start gap-2 md:gap-4 pl-1">
                    <span class="text-white text-xs md:text-sm uppercase tracking-widest font-bold whitespace-nowrap">View Project</span>
                    <svg viewBox="0 0 24 24" role="img" fill="none" class="h-6 w-6 sm:h-8 sm:w-8 lg:h-10 lg:w-10 text-white">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M1.9999 11.9998C1.9999 12.552 2.44762 12.9997 2.9999 12.9997H18.9757C18.8901 13.148 18.7838 13.2876 18.657 13.4144L12.2931 19.7784C11.9025 20.1689 11.9025 20.8021 12.2931 21.1926C12.6836 21.5831 13.3168 21.5831 13.7073 21.1926L22.1926 12.7073C22.5831 12.3168 22.5831 11.6836 22.1926 11.2931L22.1924 11.293L13.7071 2.80767C13.3166 2.41715 12.6834 2.41715 12.2929 2.80767C11.9024 3.1982 11.9024 3.83136 12.2929 4.22189L18.657 10.586C18.7836 10.7126 18.8896 10.8518 18.9752 10.9998H2.9999C2.44762 10.9997 1.9999 11.4475 1.9999 11.9998Z" fill="currentColor" />
                    </svg>
                  </div>
                </div>
              </div>
            </a>
          </div>

        </article>
      ))}
    </div>
  </section>
</div>

  </section>
</div>

<style>
  /* Local overrides for the wrapper */
  #featured-work-container {
    box-shadow: 0 -20px 50px rgba(0,0,0,0.1);
  }
</style>
