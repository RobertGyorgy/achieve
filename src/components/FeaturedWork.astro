---
// Featured Work Section Component
const featuredProjects = [
  {
    id: 1,
    title: 'Digital Agency',
    slug: 'digital-agency',
    description: 'Modern agency website with immersive design',
    tags: ['Web Design', 'Development', 'Animation'],
    videoUrl: '/Videos/video1.mp4',
  },
  {
    id: 2,
    title: 'E-Commerce Platform',
    slug: 'ecommerce-platform',
    description: 'Full-stack e-commerce solution with advanced features',
    tags: ['E-Commerce', 'Development'],
    videoUrl: '/video 2.mp4',
  },
  {
    id: 3,
    title: 'SaaS Dashboard',
    slug: 'saas-dashboard',
    description: 'Enterprise-grade dashboard with real-time analytics',
    tags: ['SaaS', 'UI/UX Design'],
    videoUrl: '/Videos/orange 1.mp4',
  },
];
---

<div class="relative w-full z-20">
  <section id="featured-work-container" class="relative w-full h-[100svh] bg-[#0d141a] overflow-hidden">
    
    <!-- Static Slice Borders overlay -->
    <div class="absolute inset-0 w-full h-full pointer-events-none z-[40] grid grid-cols-2 md:grid-cols-3">
      <div class="w-full h-full border-r border-white/20"></div>
      <div class="w-full h-full border-r border-white/20 md:border-r-0 lg:border-r lg:border-white/20"></div>
      <div class="w-full h-full hidden md:block"></div>
    </div>

    <!-- Global Transition Mask (Wipes over videos) -->
    <div class="absolute inset-0 w-full h-full pointer-events-none z-[35] grid grid-cols-2 md:grid-cols-3 js-transition-mask">
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform"></div>
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform"></div>
      <div class="w-full h-full bg-white origin-left mask-slice transform scale-x-0 will-change-transform hidden md:block"></div>
    </div>

    <div class="absolute inset-0 w-full h-full overflow-hidden js-projects-container">
      {featuredProjects.map((project, index) => (
        <article 
          class={`featured-card absolute inset-0 w-full h-full flex flex-col justify-end will-change-transform z-10 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
          style={`pointer-events: ${index === 0 ? 'auto' : 'none'};`}
          data-index={index}
        >
          <!-- Base Full-Screen Video -->
          <div class="absolute inset-0 w-full h-full pointer-events-none overflow-hidden z-10">
            <div class="absolute inset-0 opacity-20 z-10" style="background-image: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 40px 40px;"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent z-20"></div>
            <video 
              src={project.videoUrl}
              class="absolute inset-0 w-full h-full object-cover object-center"
              autoplay
              muted
              loop
              playsinline
            ></video>
          </div>

          <!-- Content (Stays above everything via z-50, but we'll fade it with GSAP) -->
          <div class={`card-content relative z-50 w-full max-w-[90rem] mx-auto flex flex-col gap-6 lg:gap-8 xl:px-12 ${index === 0 ? 'opacity-100' : 'opacity-0'}`} style="margin-bottom: 15vh !important; padding-left: 4vw !important;">
            
            <a href={`/work/${project.slug}`} class="group block w-full max-w-max">
              <div class="flex items-center relative">
                <h3 class="text-white text-4xl sm:text-5xl md:text-6xl lg:text-7xl xl:text-[5.5rem] font-nura uppercase leading-[0.9] tracking-tight transition-transform duration-500 ease-out will-change-transform group-hover:pl-4">
                  {project.title}
                </h3>
              </div>
            </a>
          </div>

        </article>
      ))}
    </div>
  </section>
</div>

<!-- Custom "View Project" Cursor Follower -->
<div id="feature-cursor" class="fixed top-0 left-0 w-24 h-24 rounded-full bg-white/10 backdrop-blur-md border border-white/30 text-white flex items-center justify-center pointer-events-none z-[99999] mix-blend-difference opacity-0" style="transform: scale(0);">
  <span class="text-[10px] uppercase tracking-widest font-bold text-center leading-tight">View<br/>Project</span>
</div>

<style>
  /* Local overrides for the wrapper */
  #featured-work-container {
    box-shadow: 0 -20px 50px rgba(0,0,0,0.1);
    cursor: none; /* Hide default cursor when hovering this section */
  }
</style>
